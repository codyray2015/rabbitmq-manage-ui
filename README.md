# RabbitMQ ç®¡ç†å¹³å°

åŸºäºæ¨¡æ¿çš„ RabbitMQ ç³»ç»Ÿç®¡ç†å·¥å…·ï¼Œæä¾›å¯è§†åŒ–ç•Œé¢æ¥ç®¡ç† RabbitMQ é˜Ÿåˆ—ã€äº¤æ¢æœºå’Œå‡­è¯ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **æ¨¡æ¿åŒ–ç³»ç»Ÿåˆ›å»º**: ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿å¿«é€Ÿåˆ›å»ºå¤æ‚çš„ RabbitMQ ç³»ç»Ÿ
- **ç³»ç»Ÿç®¡ç†**: å¯è§†åŒ–ç®¡ç†å’Œç›‘æ§å·²åˆ›å»ºçš„ç³»ç»Ÿ
- **å‡­è¯ç®¡ç†**: ä¸ºç³»ç»Ÿåˆ›å»ºå’Œç®¡ç†ä¸»/è¾…åŒå‡­è¯
- **ä»£ç ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆ .NET ç”Ÿäº§è€…/æ¶ˆè´¹è€…ä»£ç 
- **èµ„æºç®¡ç†**: ç®¡ç†ç³»ç»Ÿä¸­çš„é˜Ÿåˆ—ã€äº¤æ¢æœºå’Œç»‘å®šå…³ç³»
- **å®æ—¶ç›‘æ§**: æŸ¥çœ‹æ¶ˆæ¯é€Ÿç‡ã€é˜Ÿåˆ—çŠ¶æ€ç­‰æŒ‡æ ‡
- **ç”¨æˆ·è®¤è¯**: ä½¿ç”¨ RabbitMQ Management API å‡­è¯ç™»å½•

## ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 19 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 7
- **UI æ¡†æ¶**: Tailwind CSS 4
- **è·¯ç”±**: React Router 7
- **å›¾è¡¨**: Chart.js + react-chartjs-2
- **è¡¨å•**: React Hook Form + Zod
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **PWA**: Vite PWA Plugin

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- Node.js >= 18
- npm æˆ– yarn æˆ– pnpm
- RabbitMQ æœåŠ¡å™¨ï¼ˆå¯ç”¨ Management Pluginï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone <repository-url>
cd rabbitmq-manage/app
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# RabbitMQ ä¸»æœºåï¼ˆç”¨äºç”Ÿæˆè¿æ¥å­—ç¬¦ä¸²å’Œä»£ç ï¼‰
VITE_RABBITMQ_HOST=your-rabbitmq-server.com

# RabbitMQ Management API URL
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å®Œæ•´ URLï¼ˆæ¨è - æ— éœ€ä»£ç†é…ç½®ï¼‰
VITE_RABBITMQ_API_URL=https://your-rabbitmq-server.com:15672/api

# æ–¹å¼äºŒï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆéœ€è¦é…ç½®åå‘ä»£ç†ï¼‰
# VITE_RABBITMQ_API_URL=/api
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç™»å½•

1. æ‰“å¼€åº”ç”¨
2. ä½¿ç”¨ RabbitMQ Management API çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•
3. ç³»ç»Ÿä¼šéªŒè¯å‡­è¯å¹¶è¿æ¥åˆ° RabbitMQ æœåŠ¡å™¨

### åˆ›å»ºç³»ç»Ÿ

1. åœ¨"åˆ›å»ºç³»ç»Ÿ"æ ‡ç­¾é¡µé€‰æ‹©æ¨¡æ¿
2. å¡«å†™ç³»ç»Ÿå‚æ•°ï¼ˆvhostã€é˜Ÿåˆ—å‰ç¼€ç­‰ï¼‰
3. ç‚¹å‡»"åˆ›å»ºç³»ç»Ÿ"
4. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€çš„é˜Ÿåˆ—ã€äº¤æ¢æœºå’Œç»‘å®š

### ç®¡ç†ç³»ç»Ÿ

1. åœ¨"ç³»ç»Ÿç®¡ç†"æ ‡ç­¾é¡µæŸ¥çœ‹æ‰€æœ‰ç³»ç»Ÿ
2. ç‚¹å‡»ç³»ç»Ÿå¡ç‰‡è¿›å…¥è¯¦æƒ…é¡µ
3. å¯ä»¥æŸ¥çœ‹ï¼š
   - **æ¦‚è§ˆ**: ç³»ç»ŸåŸºæœ¬ä¿¡æ¯å’ŒæŒ‡æ ‡
   - **å‡­è¯**: ç®¡ç†ä¸»/è¾…å‡­è¯
   - **ä»£ç ç”Ÿæˆ**: ç”Ÿæˆ .NET ä»£ç 
   - **èµ„æº**: æŸ¥çœ‹é˜Ÿåˆ—å’Œäº¤æ¢æœºè¯¦æƒ…

### å‡­è¯ç®¡ç†

1. è¿›å…¥ç³»ç»Ÿè¯¦æƒ…é¡µ > å‡­è¯æ ‡ç­¾
2. åˆ›å»ºä¸»å‡­è¯æˆ–è¾…åŠ©å‡­è¯
3. å¯ä»¥å¤åˆ¶ç”¨æˆ·åã€å¯†ç å’Œè¿æ¥å­—ç¬¦ä¸²
4. å‡­è¯ä¼šè‡ªåŠ¨ç»‘å®šåˆ°ç³»ç»Ÿèµ„æº

### ä»£ç ç”Ÿæˆ

1. è¿›å…¥ç³»ç»Ÿè¯¦æƒ…é¡µ > ä»£ç ç”Ÿæˆæ ‡ç­¾
2. é€‰æ‹©å‡­è¯ç±»å‹ï¼ˆä¸»/è¾…ï¼‰
3. é€‰æ‹©ä»£ç ç±»å‹ï¼ˆç”Ÿäº§è€…/æ¶ˆè´¹è€…/é‡è¯•æ¶ˆè´¹è€…ï¼‰
4. é€‰æ‹©ç›®æ ‡é˜Ÿåˆ—æˆ–äº¤æ¢æœº
5. å¤åˆ¶æˆ–ä¸‹è½½ç”Ÿæˆçš„ C# ä»£ç 

## ğŸ— é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”œâ”€â”€ charts/         # å›¾è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ system-detail/  # ç³»ç»Ÿè¯¦æƒ…é¡µç»„ä»¶
â”‚   â””â”€â”€ ui/            # UI åŸºç¡€ç»„ä»¶
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ lib/              # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ api.ts        # RabbitMQ API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ credentialsManager.ts  # å‡­è¯ç®¡ç†
â”‚   â”œâ”€â”€ template.ts   # æ¨¡æ¿å¼•æ“
â”‚   â””â”€â”€ templates/    # ç³»ç»Ÿæ¨¡æ¿
â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
```

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°æ¨¡æ¿

1. åœ¨ `src/lib/templates/` åˆ›å»º YAML æ¨¡æ¿æ–‡ä»¶
2. æ¨¡æ¿éœ€è¦åŒ…å«ï¼š
   - å…ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ã€ç‰ˆæœ¬ï¼‰
   - å‚æ•°å®šä¹‰
   - é˜Ÿåˆ—ã€äº¤æ¢æœºå’Œç»‘å®šé…ç½®
3. é‡å¯å¼€å‘æœåŠ¡å™¨ï¼Œæ¨¡æ¿ä¼šè‡ªåŠ¨åŠ è½½

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºäº§ç‰©åœ¨ `dist/` ç›®å½•

### ä»£ç æ£€æŸ¥

```bash
npm run lint
```

## ğŸš€ éƒ¨ç½²è¯´æ˜

### è·¯ç”±æ¨¡å¼

æœ¬åº”ç”¨ä½¿ç”¨ **Hash è·¯ç”±æ¨¡å¼**ï¼ˆURL ä¸­å¸¦ `#`ï¼‰ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

âœ… **æ— éœ€æœåŠ¡å™¨é…ç½®** - ä¸éœ€è¦é…ç½® rewrite è§„åˆ™
âœ… **å­è·¯å¾„éƒ¨ç½²å‹å¥½** - å¯ä»¥éƒ¨ç½²åˆ°ä»»æ„è·¯å¾„è€Œæ— éœ€é‡æ–°ç¼–è¯‘
âœ… **çµæ´»ç§»åŠ¨** - éƒ¨ç½²åå¯ä»¥éšæ„ç§»åŠ¨ç›®å½•ä½ç½®

**URL ç¤ºä¾‹**ï¼š
```
https://example.com/#/login
https://example.com/rabbitmq-ui/#/login
https://example.com/admin/tools/rmq/#/login
```

### API é…ç½®æ¨¡å¼

#### æ¨¡å¼ä¸€ï¼šç›´è¿ RabbitMQï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**: é…ç½®è¶…ç®€å•ï¼Œæ— éœ€åå‘ä»£ç†

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š
```env
VITE_RABBITMQ_API_URL=https://rmq.example.com:15672/api
```

**Caddy é…ç½®**ï¼ˆåªéœ€é™æ€æ–‡ä»¶æœåŠ¡ï¼‰ï¼š
```caddy
example.com {
    # æ ¹è·¯å¾„éƒ¨ç½²
    root * /var/www/rabbitmq-manage/dist
    file_server
}

# æˆ–å­è·¯å¾„éƒ¨ç½²
example.com {
    handle_path /rabbitmq-ui* {
        root * /var/www/rabbitmq-manage/dist
        file_server
    }
}
```

**æ³¨æ„**: éœ€è¦ç¡®ä¿ RabbitMQ Management Plugin å…è®¸ CORSã€‚å¦‚æœéœ€è¦é…ç½® CORSï¼Œå‚è€ƒï¼š
```bash
# rabbitmq.conf
management.cors.allow_origins.1 = https://example.com
management.cors.allow_origins.2 = https://*.example.com
```

---

#### æ¨¡å¼äºŒï¼šé€šè¿‡ä»£ç†è®¿é—®

**ä¼˜åŠ¿**: æ— éœ€é…ç½® CORSï¼Œæ‰€æœ‰è¯·æ±‚åŒæº

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š
```env
VITE_RABBITMQ_API_URL=/api
```

**Caddy é…ç½®**ï¼š
```caddy
example.com {
    # é™æ€æ–‡ä»¶æœåŠ¡
    root * /var/www/rabbitmq-manage/dist
    file_server

    # API ä»£ç†åˆ° RabbitMQ
    handle /api/* {
        reverse_proxy localhost:15672
    }
}
```

### Nginx é…ç½®ç¤ºä¾‹

```nginx
# æ ¹è·¯å¾„éƒ¨ç½²
location / {
    root /var/www/rabbitmq-manage/dist;
    try_files $uri $uri/ /index.html;
}

# å­è·¯å¾„éƒ¨ç½²
location /rabbitmq-ui {
    alias /var/www/rabbitmq-manage/dist;
    try_files $uri $uri/ /rabbitmq-ui/index.html;
}

# API ä»£ç†
location /api {
    proxy_pass http://localhost:15672;
}
```

## ğŸ”’ å®‰å…¨è¯´æ˜

- å‡­è¯ä»…å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šæŒä¹…åŒ–åˆ°æœ¬åœ°å­˜å‚¨
- åˆ·æ–°é¡µé¢ä¼šä¸¢å¤±ç™»å½•çŠ¶æ€
- æ‰€æœ‰ API è¯·æ±‚ä½¿ç”¨ Basic Auth
- ç¯å¢ƒå˜é‡æ–‡ä»¶ (`.env`) å·²åŠ å…¥ `.gitignore`

## ğŸ“„ License

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
